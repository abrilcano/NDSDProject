akka {
  # log-dead-letters = off
  # log-dead-letters-during-shutdown = off
  actor {
    provider = "cluster"
    allow-java-serialization = off
    serialization-bindings {
      "java.util.ArrayList" = jackson-json
      "com.polimi.utils.WindowSnapshot" = jackson-json
      "com.polimi.utils.FlushCommand" = jackson-json
      "com.polimi.actors.TempActor$ValueAdded" = jackson-json
      "com.polimi.actors.TempActor$FlushWindow" = jackson-json
      "com.polimi.actors.AirActor$ValueAdded" = jackson-json
      "com.polimi.actors.AirActor$FlushWindow" = jackson-json
      "com.polimi.actors.HumActor$ValueAdded" = jackson-json
      "com.polimi.actors.HumActor$FlushWindow" = jackson-json
      "com.polimi.actors.WindActor$ValueAdded" = jackson-json
      "com.polimi.actors.WindActor$FlushWindow" = jackson-json
    }
  }
  
  # Cluster Sharding optimization
  cluster.sharding {
    # Number of shards per entity type (optimize based on your data)
    number-of-shards = 8
    
    # Rebalance settings for performance
    rebalance-interval = 10s
    max-simultaneous-rebalance = 3
    
    # Passivation to free up unused entities
    passivate-idle-entity-after = 5m
  }
  
  persistence {
    journal.plugin = "akka.persistence.journal.leveldb"
    snapshot-store.plugin = "akka.persistence.snapshot-store.local"

    journal.leveldb {
      dir = "target/journal"
      native = false
    }

    snapshot-store.local {
      dir = "target/snapshots"
    }
  }
  remote{
    artery{
      transport = tcp
      canonical.hostname = "127.0.0.1"
      canonical.port = 2551
    }
  }
  cluster{
    seed-nodes = [
      "akka://DataConsumerSystem@172.20.10.1:2551",
    ]
    downing-provider-class = "akka.cluster.sbr.SplitBrainResolverProvider"
  }
}